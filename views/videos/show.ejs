<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title><%= video.title %> – OLYMP Streaming</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <%- include('../partials/navbar') %>

  <div class="page-with-scores">
    <%- include('../partials/scores') %>

    <main class="page-wrapper video-main">
      <%- include('../partials/flash') %>

<% if (typeof video === 'undefined' || !video) { %>
  <p>Vidéo introuvable.</p>
<% } else { %>
  <div class="video-player-wrapper">
      <% if (video.isLive) { %>
                <span class="live-badge large">STREAM EN DIRECT</span>
              <% } %>
      <a class="btn btn-ghost" href="/videos">← Retour aux vidéos</a>
    <div class="video-aspect">
      <% if (video.videoFileUrl) { %>
        <video
          controls
          playsinline
          autoplay
          poster="<%= video.thumbnailUrl %>"
          style="width:100%; height:100%; object-fit:cover; background:#000; border-radius:12px;"
        >
          <source src="<%= video.videoFileUrl %>" type="video/mp4">
          Votre navigateur ne supporte pas la lecture vidéo HTML5.
        </video>
      <% } else { %>
        <iframe
          src="<%= video.embedUrl %>"
          frameborder="0"
          allow="autoplay; fullscreen; picture-in-picture"
          allowfullscreen>
        </iframe>
      <% } %>
    </div>
  </div>
<% } %>
<%- include('../partials/pub') %>


    </main>
  </div>

  <script src="/js/videoPage.js"></script>
</body>
</html>
